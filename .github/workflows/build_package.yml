name: Build Ska Package

on:
  repository_dispatch:
    types:
      - build-package

jobs:
  build:
    uses: sot/skare3/.github/workflows/package_build.yml@master
    with:
      repository: ${{ github.event.client_payload.package }}
      tag: ${{ github.event.client_payload.tag }}
      noarch: ${{ github.event.client_payload.arch == 'true' }}
      python_version: "3.11"
      numpy_version: "1.26.2"
      skare3_branch: "2024_0-branch"
    secrets:
      CONDA_PASSWORD: ${{ secrets.CONDA_PASSWORD }}
      CHANDRA_XRAY_TOKEN: ${{ secrets.CHANDRA_XRAY_TOKEN }}
      token: ${{ secrets.GITHUB_TOKEN }}
